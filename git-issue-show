#!/bin/bash

show() {
    local ID=$1
    local ref="refs/issues/$ID"
    local title=$(git show $ref:title)
    echo -e "$ID - $title\n"
    git ls-tree --format="%(path)" $ref msgs/ | while read path; do
    local msg_id=$(echo $path | perl -nalE 'say $1 if m{([^/]+)$}')
	local author=$(git log --pretty=format:"%aN" $ref -- $path | tail -1)
        echo -e "\t$author ($msg_id):"
	git show $ref:$path | while read line; do echo -e "\t\t$line"; done
	echo
    done
}
